<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:process id="Process_1" isExecutable="false">
    <bpmn:startEvent id="start" name="Purchase order received from customer">
      <bpmn:outgoing>start-task1</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:task id="task1" name="Check product stock">
      <bpmn:incoming>start-task1</bpmn:incoming>
      <bpmn:outgoing>task1-gateway1</bpmn:outgoing>
    </bpmn:task>
    <bpmn:exclusiveGateway id="gateway1" name="Is product in stock?">
      <bpmn:incoming>task1-gateway1</bpmn:incoming>
      <bpmn:outgoing>gateway1-task2</bpmn:outgoing>
      <bpmn:outgoing>gateway1-task9</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="task2" name="Request product from warehouse">
      <bpmn:incoming>gateway1-task2</bpmn:incoming>
      <bpmn:outgoing>task2-task3</bpmn:outgoing>
    </bpmn:task>
    <bpmn:userTask id="task3" name="Confirm order">
      <bpmn:incoming>task2-task3</bpmn:incoming>
      <bpmn:outgoing>task3-task4</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="task4" name="Obtain shipment address from customer">
      <bpmn:incoming>task3-task4</bpmn:incoming>
      <bpmn:outgoing>task4-task5</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:task id="task5" name="Ship product to customer">
      <bpmn:incoming>task4-task5</bpmn:incoming>
      <bpmn:outgoing>task5-parallel1</bpmn:outgoing>
    </bpmn:task>
    <bpmn:parallelGateway id="parallel1">
      <bpmn:incoming>task5-parallel1</bpmn:incoming>
      <bpmn:outgoing>parallel1-task6</bpmn:outgoing>
      <bpmn:outgoing>parallel1-task7</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:parallelGateway id="parallel1-join">
      <bpmn:incoming>task6-parallel1-join</bpmn:incoming>
      <bpmn:incoming>task7-parallel1-join</bpmn:incoming>
      <bpmn:outgoing>parallel1-join-task8</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:serviceTask id="task6" name="Emit invoice for order">
      <bpmn:incoming>parallel1-task6</bpmn:incoming>
      <bpmn:outgoing>task6-parallel1-join</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="task7" name="Receive and record payment for order">
      <bpmn:incoming>parallel1-task7</bpmn:incoming>
      <bpmn:outgoing>task7-parallel1-join</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="task8" name="Archive completed order with shipment and payment details">
      <bpmn:incoming>parallel1-join-task8</bpmn:incoming>
      <bpmn:outgoing>task8-end1</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="end1" name="Order archived">
      <bpmn:incoming>task8-end1</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="task9" name="Reject order due to stock unavailability">
      <bpmn:incoming>gateway1-task9</bpmn:incoming>
      <bpmn:outgoing>task9-end2</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="end2" name="Order rejected">
      <bpmn:incoming>task9-end2</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="start-task1" sourceRef="start" targetRef="task1" />
    <bpmn:sequenceFlow id="task1-gateway1" sourceRef="task1" targetRef="gateway1" />
    <bpmn:sequenceFlow id="task2-task3" sourceRef="task2" targetRef="task3" />
    <bpmn:sequenceFlow id="task3-task4" sourceRef="task3" targetRef="task4" />
    <bpmn:sequenceFlow id="task4-task5" sourceRef="task4" targetRef="task5" />
    <bpmn:sequenceFlow id="task5-parallel1" sourceRef="task5" targetRef="parallel1" />
    <bpmn:sequenceFlow id="task6-parallel1-join" sourceRef="task6" targetRef="parallel1-join" />
    <bpmn:sequenceFlow id="parallel1-task6" sourceRef="parallel1" targetRef="task6" />
    <bpmn:sequenceFlow id="task7-parallel1-join" sourceRef="task7" targetRef="parallel1-join" />
    <bpmn:sequenceFlow id="parallel1-task7" sourceRef="parallel1" targetRef="task7" />
    <bpmn:sequenceFlow id="parallel1-join-task8" sourceRef="parallel1-join" targetRef="task8" />
    <bpmn:sequenceFlow id="task8-end1" sourceRef="task8" targetRef="end1" />
    <bpmn:sequenceFlow id="gateway1-task2" name="If the product is in stock" sourceRef="gateway1" targetRef="task2" />
    <bpmn:sequenceFlow id="task9-end2" sourceRef="task9" targetRef="end2" />
    <bpmn:sequenceFlow id="gateway1-task9" name="If the product is not in stock" sourceRef="gateway1" targetRef="task9" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_Process_1">
    <bpmndi:BPMNPlane id="BPMNPlane_Process_1" bpmnElement="Process_1">
      <bpmndi:BPMNShape id="start_di" bpmnElement="start">
        <dc:Bounds x="57" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task1_di" bpmnElement="task1">
        <dc:Bounds x="175" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="gateway1_di" bpmnElement="gateway1" isMarkerVisible="true">
        <dc:Bounds x="350" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task2_di" bpmnElement="task2">
        <dc:Bounds x="475" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task3_di" bpmnElement="task3">
        <dc:Bounds x="625" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task4_di" bpmnElement="task4">
        <dc:Bounds x="775" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task5_di" bpmnElement="task5">
        <dc:Bounds x="925" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="parallel1_di" bpmnElement="parallel1">
        <dc:Bounds x="1100" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task6_di" bpmnElement="task6">
        <dc:Bounds x="1225" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="parallel1-join_di" bpmnElement="parallel1-join">
        <dc:Bounds x="1400" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task8_di" bpmnElement="task8">
        <dc:Bounds x="1525" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end1_di" bpmnElement="end1">
        <dc:Bounds x="1707" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task9_di" bpmnElement="task9">
        <dc:Bounds x="475" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end2_di" bpmnElement="end2">
        <dc:Bounds x="657" y="192" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task7_di" bpmnElement="task7">
        <dc:Bounds x="1375" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="start-task1_di" bpmnElement="start-task1">
        <di:waypoint x="93" y="70" />
        <di:waypoint x="175" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task1-gateway1_di" bpmnElement="task1-gateway1">
        <di:waypoint x="275" y="70" />
        <di:waypoint x="350" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="gateway1-task2_di" bpmnElement="gateway1-task2">
        <di:waypoint x="400" y="70" />
        <di:waypoint x="475" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="gateway1-task9_di" bpmnElement="gateway1-task9">
        <di:waypoint x="375" y="95" />
        <di:waypoint x="375" y="210" />
        <di:waypoint x="475" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task2-task3_di" bpmnElement="task2-task3">
        <di:waypoint x="575" y="70" />
        <di:waypoint x="625" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task3-task4_di" bpmnElement="task3-task4">
        <di:waypoint x="725" y="70" />
        <di:waypoint x="775" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task4-task5_di" bpmnElement="task4-task5">
        <di:waypoint x="875" y="70" />
        <di:waypoint x="925" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task5-parallel1_di" bpmnElement="task5-parallel1">
        <di:waypoint x="1025" y="70" />
        <di:waypoint x="1100" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="parallel1-task6_di" bpmnElement="parallel1-task6">
        <di:waypoint x="1150" y="70" />
        <di:waypoint x="1225" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="parallel1-task7_di" bpmnElement="parallel1-task7">
        <di:waypoint x="1125" y="95" />
        <di:waypoint x="1125" y="210" />
        <di:waypoint x="1375" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task6-parallel1-join_di" bpmnElement="task6-parallel1-join">
        <di:waypoint x="1325" y="70" />
        <di:waypoint x="1400" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="parallel1-join-task8_di" bpmnElement="parallel1-join-task8">
        <di:waypoint x="1450" y="70" />
        <di:waypoint x="1525" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task8-end1_di" bpmnElement="task8-end1">
        <di:waypoint x="1625" y="70" />
        <di:waypoint x="1707" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task9-end2_di" bpmnElement="task9-end2">
        <di:waypoint x="575" y="210" />
        <di:waypoint x="657" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task7-parallel1-join_di" bpmnElement="task7-parallel1-join">
        <di:waypoint x="1425" y="170" />
        <di:waypoint x="1425" y="95" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
