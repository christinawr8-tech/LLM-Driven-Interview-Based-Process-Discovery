<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" id="definitions_1" targetNamespace="http://bpmn.io/schema/bpmn">
  <bpmn:process id="Process_1" isExecutable="false">
    <bpmn:startEvent id="start" name="Purchase order received">
      <bpmn:outgoing>start-task_record_order</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="task_record_order" name="Record order details in order management system">
      <bpmn:incoming>start-task_record_order</bpmn:incoming>
      <bpmn:outgoing>task_record_order-task_check_product_stock</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="task_check_product_stock" name="Check product availability in stock">
      <bpmn:incoming>task_record_order-task_check_product_stock</bpmn:incoming>
      <bpmn:outgoing>task_check_product_stock-gateway_product_in_stock</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="gateway_product_in_stock" name="Is product in stock?">
      <bpmn:incoming>task_check_product_stock-gateway_product_in_stock</bpmn:incoming>
      <bpmn:outgoing>gateway_product_in_stock-task_retrieve_product</bpmn:outgoing>
      <bpmn:outgoing>gateway_product_in_stock-task_check_raw_materials</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="gateway_product_in_stock-join">
      <bpmn:incoming>task_confirm_order_instock-gateway_product_in_stock-join</bpmn:incoming>
      <bpmn:incoming>task_confirm_order_manufactured-gateway_product_in_stock-join</bpmn:incoming>
      <bpmn:outgoing>gateway_product_in_stock-join-task_obtain_shipment_address</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:task id="task_retrieve_product" name="Retrieve product from warehouse">
      <bpmn:incoming>gateway_product_in_stock-task_retrieve_product</bpmn:incoming>
      <bpmn:outgoing>task_retrieve_product-task_confirm_order_instock</bpmn:outgoing>
    </bpmn:task>
    <bpmn:userTask id="task_confirm_order_instock" name="Confirm order for in-stock product">
      <bpmn:incoming>task_retrieve_product-task_confirm_order_instock</bpmn:incoming>
      <bpmn:outgoing>task_confirm_order_instock-gateway_product_in_stock-join</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="task_check_raw_materials" name="Check availability of required raw materials">
      <bpmn:incoming>gateway_raw_materials_available-task_check_raw_materials</bpmn:incoming>
      <bpmn:incoming>gateway_product_in_stock-task_check_raw_materials</bpmn:incoming>
      <bpmn:outgoing>task_check_raw_materials-gateway_raw_materials_available</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="gateway_raw_materials_available" name="Are required raw materials available?">
      <bpmn:incoming>task_check_raw_materials-gateway_raw_materials_available</bpmn:incoming>
      <bpmn:outgoing>gateway_raw_materials_available-task_order_raw_materials</bpmn:outgoing>
      <bpmn:outgoing>gateway_raw_materials_available-task_check_raw_materials</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:serviceTask id="task_order_raw_materials" name="Order required raw materials from suppliers">
      <bpmn:incoming>gateway_raw_materials_available-task_order_raw_materials</bpmn:incoming>
      <bpmn:outgoing>task_order_raw_materials-task_receive_raw_materials</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:task id="task_receive_raw_materials" name="Receive raw materials from suppliers">
      <bpmn:incoming>task_order_raw_materials-task_receive_raw_materials</bpmn:incoming>
      <bpmn:outgoing>task_receive_raw_materials-task_manufacture_product</bpmn:outgoing>
    </bpmn:task>
    <bpmn:task id="task_manufacture_product" name="Manufacture product">
      <bpmn:incoming>task_receive_raw_materials-task_manufacture_product</bpmn:incoming>
      <bpmn:outgoing>task_manufacture_product-task_confirm_order_manufactured</bpmn:outgoing>
    </bpmn:task>
    <bpmn:userTask id="task_confirm_order_manufactured" name="Confirm order for manufactured product">
      <bpmn:incoming>task_manufacture_product-task_confirm_order_manufactured</bpmn:incoming>
      <bpmn:outgoing>task_confirm_order_manufactured-gateway_product_in_stock-join</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="task_obtain_shipment_address" name="Obtain shipment address from customer">
      <bpmn:incoming>gateway_product_in_stock-join-task_obtain_shipment_address</bpmn:incoming>
      <bpmn:outgoing>task_obtain_shipment_address-parallel_shipping_and_invoicing</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:parallelGateway id="parallel_shipping_and_invoicing">
      <bpmn:incoming>task_obtain_shipment_address-parallel_shipping_and_invoicing</bpmn:incoming>
      <bpmn:outgoing>parallel_shipping_and_invoicing-task_ship_product</bpmn:outgoing>
      <bpmn:outgoing>parallel_shipping_and_invoicing-task_issue_invoice</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:parallelGateway id="parallel_shipping_and_invoicing-join">
      <bpmn:incoming>task_ship_product-parallel_shipping_and_invoicing-join</bpmn:incoming>
      <bpmn:incoming>task_receive_payment-parallel_shipping_and_invoicing-join</bpmn:incoming>
      <bpmn:outgoing>parallel_shipping_and_invoicing-join-task_archive_order</bpmn:outgoing>
    </bpmn:parallelGateway>
    <bpmn:task id="task_ship_product" name="Ship product to customer">
      <bpmn:incoming>parallel_shipping_and_invoicing-task_ship_product</bpmn:incoming>
      <bpmn:outgoing>task_ship_product-parallel_shipping_and_invoicing-join</bpmn:outgoing>
    </bpmn:task>
    <bpmn:serviceTask id="task_issue_invoice" name="Issue invoice to customer">
      <bpmn:incoming>parallel_shipping_and_invoicing-task_issue_invoice</bpmn:incoming>
      <bpmn:outgoing>task_issue_invoice-task_receive_payment</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="task_receive_payment" name="Receive payment for order">
      <bpmn:incoming>task_issue_invoice-task_receive_payment</bpmn:incoming>
      <bpmn:outgoing>task_receive_payment-parallel_shipping_and_invoicing-join</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="task_archive_order" name="Archive order">
      <bpmn:incoming>parallel_shipping_and_invoicing-join-task_archive_order</bpmn:incoming>
      <bpmn:outgoing>task_archive_order-end</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:endEvent id="end" name="Order fulfillment completed">
      <bpmn:incoming>task_archive_order-end</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="start-task_record_order" sourceRef="start" targetRef="task_record_order" />
    <bpmn:sequenceFlow id="task_record_order-task_check_product_stock" sourceRef="task_record_order" targetRef="task_check_product_stock" />
    <bpmn:sequenceFlow id="task_check_product_stock-gateway_product_in_stock" sourceRef="task_check_product_stock" targetRef="gateway_product_in_stock" />
    <bpmn:sequenceFlow id="task_retrieve_product-task_confirm_order_instock" sourceRef="task_retrieve_product" targetRef="task_confirm_order_instock" />
    <bpmn:sequenceFlow id="task_confirm_order_instock-gateway_product_in_stock-join" sourceRef="task_confirm_order_instock" targetRef="gateway_product_in_stock-join" />
    <bpmn:sequenceFlow id="gateway_product_in_stock-task_retrieve_product" name="Product is in stock" sourceRef="gateway_product_in_stock" targetRef="task_retrieve_product" />
    <bpmn:sequenceFlow id="task_check_raw_materials-gateway_raw_materials_available" sourceRef="task_check_raw_materials" targetRef="gateway_raw_materials_available" />
    <bpmn:sequenceFlow id="task_order_raw_materials-task_receive_raw_materials" sourceRef="task_order_raw_materials" targetRef="task_receive_raw_materials" />
    <bpmn:sequenceFlow id="task_receive_raw_materials-task_manufacture_product" sourceRef="task_receive_raw_materials" targetRef="task_manufacture_product" />
    <bpmn:sequenceFlow id="task_manufacture_product-task_confirm_order_manufactured" sourceRef="task_manufacture_product" targetRef="task_confirm_order_manufactured" />
    <bpmn:sequenceFlow id="task_confirm_order_manufactured-gateway_product_in_stock-join" sourceRef="task_confirm_order_manufactured" targetRef="gateway_product_in_stock-join" />
    <bpmn:sequenceFlow id="gateway_raw_materials_available-task_order_raw_materials" name="Raw materials are available" sourceRef="gateway_raw_materials_available" targetRef="task_order_raw_materials" />
    <bpmn:sequenceFlow id="gateway_raw_materials_available-task_check_raw_materials" name="Raw materials are not available" sourceRef="gateway_raw_materials_available" targetRef="task_check_raw_materials" />
    <bpmn:sequenceFlow id="gateway_product_in_stock-task_check_raw_materials" name="Product is not in stock" sourceRef="gateway_product_in_stock" targetRef="task_check_raw_materials" />
    <bpmn:sequenceFlow id="gateway_product_in_stock-join-task_obtain_shipment_address" sourceRef="gateway_product_in_stock-join" targetRef="task_obtain_shipment_address" />
    <bpmn:sequenceFlow id="task_obtain_shipment_address-parallel_shipping_and_invoicing" sourceRef="task_obtain_shipment_address" targetRef="parallel_shipping_and_invoicing" />
    <bpmn:sequenceFlow id="task_ship_product-parallel_shipping_and_invoicing-join" sourceRef="task_ship_product" targetRef="parallel_shipping_and_invoicing-join" />
    <bpmn:sequenceFlow id="parallel_shipping_and_invoicing-task_ship_product" sourceRef="parallel_shipping_and_invoicing" targetRef="task_ship_product" />
    <bpmn:sequenceFlow id="task_issue_invoice-task_receive_payment" sourceRef="task_issue_invoice" targetRef="task_receive_payment" />
    <bpmn:sequenceFlow id="task_receive_payment-parallel_shipping_and_invoicing-join" sourceRef="task_receive_payment" targetRef="parallel_shipping_and_invoicing-join" />
    <bpmn:sequenceFlow id="parallel_shipping_and_invoicing-task_issue_invoice" sourceRef="parallel_shipping_and_invoicing" targetRef="task_issue_invoice" />
    <bpmn:sequenceFlow id="parallel_shipping_and_invoicing-join-task_archive_order" sourceRef="parallel_shipping_and_invoicing-join" targetRef="task_archive_order" />
    <bpmn:sequenceFlow id="task_archive_order-end" sourceRef="task_archive_order" targetRef="end" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_Process_1">
    <bpmndi:BPMNPlane id="BPMNPlane_Process_1" bpmnElement="Process_1">
      <bpmndi:BPMNShape id="start_di" bpmnElement="start">
        <dc:Bounds x="57" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_record_order_di" bpmnElement="task_record_order">
        <dc:Bounds x="175" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_check_product_stock_di" bpmnElement="task_check_product_stock">
        <dc:Bounds x="325" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="gateway_product_in_stock_di" bpmnElement="gateway_product_in_stock" isMarkerVisible="true">
        <dc:Bounds x="500" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_retrieve_product_di" bpmnElement="task_retrieve_product">
        <dc:Bounds x="625" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_confirm_order_instock_di" bpmnElement="task_confirm_order_instock">
        <dc:Bounds x="775" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="gateway_product_in_stock-join_di" bpmnElement="gateway_product_in_stock-join" isMarkerVisible="true">
        <dc:Bounds x="950" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_obtain_shipment_address_di" bpmnElement="task_obtain_shipment_address">
        <dc:Bounds x="1075" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="parallel_shipping_and_invoicing_di" bpmnElement="parallel_shipping_and_invoicing">
        <dc:Bounds x="1250" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_ship_product_di" bpmnElement="task_ship_product">
        <dc:Bounds x="1375" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="parallel_shipping_and_invoicing-join_di" bpmnElement="parallel_shipping_and_invoicing-join">
        <dc:Bounds x="1550" y="45" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_archive_order_di" bpmnElement="task_archive_order">
        <dc:Bounds x="1675" y="30" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="end_di" bpmnElement="end">
        <dc:Bounds x="1857" y="52" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_check_raw_materials_di" bpmnElement="task_check_raw_materials">
        <dc:Bounds x="625" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="gateway_raw_materials_available_di" bpmnElement="gateway_raw_materials_available" isMarkerVisible="true">
        <dc:Bounds x="800" y="185" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_order_raw_materials_di" bpmnElement="task_order_raw_materials">
        <dc:Bounds x="925" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_receive_raw_materials_di" bpmnElement="task_receive_raw_materials">
        <dc:Bounds x="1075" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_manufacture_product_di" bpmnElement="task_manufacture_product">
        <dc:Bounds x="1225" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_confirm_order_manufactured_di" bpmnElement="task_confirm_order_manufactured">
        <dc:Bounds x="1375" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_issue_invoice_di" bpmnElement="task_issue_invoice">
        <dc:Bounds x="2125" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="task_receive_payment_di" bpmnElement="task_receive_payment">
        <dc:Bounds x="2275" y="170" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="start-task_record_order_di" bpmnElement="start-task_record_order">
        <di:waypoint x="93" y="70" />
        <di:waypoint x="175" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_record_order-task_check_product_stock_di" bpmnElement="task_record_order-task_check_product_stock">
        <di:waypoint x="275" y="70" />
        <di:waypoint x="325" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_check_product_stock-gateway_product_in_stock_di" bpmnElement="task_check_product_stock-gateway_product_in_stock">
        <di:waypoint x="425" y="70" />
        <di:waypoint x="500" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="gateway_product_in_stock-task_retrieve_product_di" bpmnElement="gateway_product_in_stock-task_retrieve_product">
        <di:waypoint x="550" y="70" />
        <di:waypoint x="625" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="gateway_product_in_stock-task_check_raw_materials_di" bpmnElement="gateway_product_in_stock-task_check_raw_materials">
        <di:waypoint x="525" y="95" />
        <di:waypoint x="525" y="210" />
        <di:waypoint x="625" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_retrieve_product-task_confirm_order_instock_di" bpmnElement="task_retrieve_product-task_confirm_order_instock">
        <di:waypoint x="725" y="70" />
        <di:waypoint x="775" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_confirm_order_instock-gateway_product_in_stock-join_di" bpmnElement="task_confirm_order_instock-gateway_product_in_stock-join">
        <di:waypoint x="875" y="70" />
        <di:waypoint x="950" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="gateway_product_in_stock-join-task_obtain_shipment_address_di" bpmnElement="gateway_product_in_stock-join-task_obtain_shipment_address">
        <di:waypoint x="1000" y="70" />
        <di:waypoint x="1075" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_obtain_shipment_address-parallel_shipping_and_invoicing_di" bpmnElement="task_obtain_shipment_address-parallel_shipping_and_invoicing">
        <di:waypoint x="1175" y="70" />
        <di:waypoint x="1250" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="parallel_shipping_and_invoicing-task_ship_product_di" bpmnElement="parallel_shipping_and_invoicing-task_ship_product">
        <di:waypoint x="1300" y="70" />
        <di:waypoint x="1375" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="parallel_shipping_and_invoicing-task_issue_invoice_di" bpmnElement="parallel_shipping_and_invoicing-task_issue_invoice">
        <di:waypoint x="1300" y="70" />
        <di:waypoint x="1350" y="70" />
        <di:waypoint x="1350" y="140" />
        <di:waypoint x="2100" y="140" />
        <di:waypoint x="2100" y="210" />
        <di:waypoint x="2125" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_ship_product-parallel_shipping_and_invoicing-join_di" bpmnElement="task_ship_product-parallel_shipping_and_invoicing-join">
        <di:waypoint x="1475" y="70" />
        <di:waypoint x="1550" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="parallel_shipping_and_invoicing-join-task_archive_order_di" bpmnElement="parallel_shipping_and_invoicing-join-task_archive_order">
        <di:waypoint x="1600" y="70" />
        <di:waypoint x="1675" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_archive_order-end_di" bpmnElement="task_archive_order-end">
        <di:waypoint x="1775" y="70" />
        <di:waypoint x="1857" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_check_raw_materials-gateway_raw_materials_available_di" bpmnElement="task_check_raw_materials-gateway_raw_materials_available">
        <di:waypoint x="725" y="210" />
        <di:waypoint x="800" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="gateway_raw_materials_available-task_order_raw_materials_di" bpmnElement="gateway_raw_materials_available-task_order_raw_materials">
        <di:waypoint x="850" y="210" />
        <di:waypoint x="925" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="gateway_raw_materials_available-task_check_raw_materials_di" bpmnElement="gateway_raw_materials_available-task_check_raw_materials">
        <di:waypoint x="800" y="210" />
        <di:waypoint x="725" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_order_raw_materials-task_receive_raw_materials_di" bpmnElement="task_order_raw_materials-task_receive_raw_materials">
        <di:waypoint x="1025" y="210" />
        <di:waypoint x="1075" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_receive_raw_materials-task_manufacture_product_di" bpmnElement="task_receive_raw_materials-task_manufacture_product">
        <di:waypoint x="1175" y="210" />
        <di:waypoint x="1225" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_manufacture_product-task_confirm_order_manufactured_di" bpmnElement="task_manufacture_product-task_confirm_order_manufactured">
        <di:waypoint x="1325" y="210" />
        <di:waypoint x="1375" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_confirm_order_manufactured-gateway_product_in_stock-join_di" bpmnElement="task_confirm_order_manufactured-gateway_product_in_stock-join">
        <di:waypoint x="1475" y="210" />
        <di:waypoint x="1500" y="210" />
        <di:waypoint x="1500" y="140" />
        <di:waypoint x="900" y="140" />
        <di:waypoint x="900" y="70" />
        <di:waypoint x="950" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_issue_invoice-task_receive_payment_di" bpmnElement="task_issue_invoice-task_receive_payment">
        <di:waypoint x="2225" y="210" />
        <di:waypoint x="2275" y="210" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="task_receive_payment-parallel_shipping_and_invoicing-join_di" bpmnElement="task_receive_payment-parallel_shipping_and_invoicing-join">
        <di:waypoint x="2375" y="210" />
        <di:waypoint x="2400" y="210" />
        <di:waypoint x="2400" y="140" />
        <di:waypoint x="1500" y="140" />
        <di:waypoint x="1500" y="70" />
        <di:waypoint x="1550" y="70" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
